<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/heade&footer.css">
    <link rel="stylesheet" href="styles/novaFicha.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>Ficha</title>
</head>

<body>
    <header>
        <div class="logo">
            <a href="">
                <img src="assets/logoBranca.png" alt="Logo do Till the Fangz na versão branca">
            </a>
        </div>
        <div class="itens">
            <a href="../index.html">Home</a>
            <a href="livro.html">Livro</a>
            <a href="bestiario.html">Bestiário</a>
            <a href="quiz.html">Quiz</a>
            <a href="ficha.html">Ficha</a>
            <a href="feed.html">Feed</a>
            <a href="login.html" class="login"><img src="assets/vampireUser.png" alt="user"> Login</a>
        </div>
    </header>

    <div class="conteudo" id="div_conteudo">
        <div class="inicial">
            <h2>Nenhum personagem encontrado!</h2>
            <button onclick="inicio()">Criar Personagem</button>
        </div>
    </div>
    <div class="conteudo">
        <div id="div_conteudoInicio" class="inicial">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoClasse">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoAtributos">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoHabilidades">

        </div>
    </div>

    <script src="js/inners.js"></script>
    <script>
        let cliquesGeral = 0;
        let cliquesTrans = 0;
        let cliquesSensiveis = 0;
        let gerarInicio = false;
        let gerarClasse = false;
        let classes = {};
        function inicio() {
            div_conteudo.style.display = "none"
            div_conteudoInicio.style.display = ""
            div_conteudoClasse.style.display = "none"
            div_conteudoAtributos.style.display = "none"
            div_conteudoHabilidades.style.display = "none"
            if (gerarInicio == false) {
                gerarInicio = true;
                div_conteudoInicio.innerHTML = textoInicio
            }
        }

        function classe() {
            div_conteudoInicio.style.display = "none"
            div_conteudoAtributos.style.display = "none"
            div_conteudoHabilidades.style.display = "none"
            div_conteudoClasse.style.display = ""
            if (gerarClasse == false) {
                gerarClasse = true
                div_conteudoClasse.innerHTML = textoClasse
            }
            classes = {
                cacador: document.getElementById('cacador'),
                barabaro: document.getElementById('barbaro'),
                ilusionista: document.getElementById('ilusionista'),
                senhor: document.getElementById('senhor'),
                cultista: document.getElementById('cultista'),
                iluminado: document.getElementById('iluminado'),
                flagelador: document.getElementById('flagelador'),
                canibal: document.getElementById('canibal')
            };
        }


        function aparecer(item) {
            classes[item].showModal();

            if (classes['cacador']) {
                desc_cacador.innerHTML = `
                <h3>Caçador Sombrio</h3>
        <p>
            Diferente de outros vampiros que matam por necessidade ou prazer imediato, o Caçador Sombrio se deleita no
            jogo da caça. Ele rastreia suas presas por dias, até semanas, estudando cada movimento antes de atacar. Seus
            sentidos, já sobre-humanos, foram aguçados ao ponto de perceber o menor sussurro no vento ou o mais tênue
            cheiro de medo.
        </p>
        <ul>
            <li>
                Agilidade aumentada: Aumenta a chance de esquiva e ataques furtivos.[+3 pontos de agilidade]
            </li>
            <li>
                Habilidade de perseguição: Pode rastrear presas com facilidade, seus sentidos foram treinados ao
                máximo.[vantagem nas trilhas sensoriais, qualquer teste sensorial tem vantagem.]
            </li>
            <li>
                Resistência a ataques furtivos: Difícil de ser pego de surpresa por outros vampiros ou caçadores. [+2
                pontos de Sangue Ancestral]
            </li>
        </ul>
        <h4>Desvantagens:</h4>
        <p>
            Obcecado pela Caça: O Caçador Sombrio não consegue resistir ao impulso de caçar. Sempre que está diante de
            uma presa em potencial, precisa realizar um teste de Inteligência para evitar persegui-la, independentemente
            da situação. Falhar no teste pode colocá-lo e seus aliados em risco.
        </p>
        <p>
            Isolamento Natural: A natureza predatória do Caçador Sombrio o torna antissocial. Ele tem dificuldade em
            formar laços ou cooperar com outros. [-2 de carisma]
        </p>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+3 de agilidade</div>
            <div class="caixa">+2 sangue ancestral</div>
            <div class="caixa">vantagem na trilha sensorial</div>
            <div class="caixa">-2 carisma</div>
        </div>
        <br>
        <button onclick="fechar('cacador')">Fechar</button>
                `
            }

            if (classes['senhor']) {
                desc_senhor.innerHTML = `<h3>Senhor das Sombras</h3>
        <p>
            Na escuridão mais profunda, onde até mesmo outros vampiros hesitam em pisar, reside o Senhor das Sombras.
            Ele não apenas abraçou a noite — tornou-se parte dela. Seu domínio sobre as trevas vai além da simples
            ausência de luz; as sombras sussurram segredos proibidos, escondem-no de olhos indesejados e dobram-se à sua
            vontade.
        </p>
        <ul>
            <li>
                Controle mental aprimorado: Facilita a manipulação de criaturas fracas ou até humanos, forçando-os a
                fazer sua vontade.[vantagem na trilha da habilidade mental]
            </li>
            <li>
                as sombras o protegem e o ajudam a se defender contra os mal intencionados que tentam descobrir os seus
                segredos por meio de invasões[+2 pontos de inteligência e sangue ancestral]
            </li>
            <li>
                Transformação em névoa ou sombra: o senhor das sombras tem uma facilidade maior com todo o obscuro, ele
                ouve as sombras sussurrando em seu ouvido[vantagem na trilha das transformações de névoa e sombra]
            </li>
        </ul>
        <h4>Desvantagens:</h4>
        <p>
            Eco Sombrio – As sombras o ouvem tanto quanto ele as ouve. Seu constante contato com a escuridão perturba
            sua mente, tornando difícil distinguir realidade de ilusão. Sempre que tenta usar sua habilidade de Controle
            Mental ou Transformação Sombria, deve fazer um teste de Inteligência. Se falhar, escutará sussurros
            incoerentes ou falsas visões que podem levá-lo a tomar decisões erradas, ou até mesmo traí-lo no momento
            mais crucial.
        </p>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+2 de inteligência</div>
            <div class="caixa">+2 sangue ancestral</div>
            <div class="caixa">vantagem na trilha da habilidade mental</div>
            <div class="caixa">vantagem na trilha das transformações de névoa e sombra</div>
        </div>
        <br>
        <button onclick="fechar('senhor')">Fechar</button>
        `
            }

        }

        function fechar(item) {
            classes[item].close()
        }
        let pontosAtributosTotais = 10;
        let pontosVida = 20;
        let pontosSanidade = 20;
        let pontosDefesa = 5;
        let armadura = 0;
        let pontosHabilidade = 4;

        let pontos = {
            carisma: 0,
            inteligencia: 0,
            agilidade: 0,
            vigor: 0,
            sangue: 0,
        };

        // Objeto para armazenar os elementos DOM que mostram os valores
        let elementos = {};

        function atributos() {
            div_conteudoClasse.style.display = "none"
            div_conteudoInicio.style.display = "none"
            div_conteudoHabilidades.style.display = "none"
            div_conteudoAtributos.style.display = ""

            div_conteudoAtributos.innerHTML = textoAtributos

            // Agora atribuimos os elementos aos campos
            elementos = {
                carisma: document.getElementById('qtd_carisma'),
                inteligencia: document.getElementById('qtd_inteligencia'),
                agilidade: document.getElementById('qtd_agilidade'),
                vigor: document.getElementById('qtd_vigor'),
                sangue: document.getElementById('qtd_sangue_ancestral'),
                totais: document.getElementById('pontos_totais'),
                vida: document.getElementById('qtd_vida'),
                sanidade: document.getElementById('qtd_sanidade'),
                defesa: document.getElementById('qtd_defesa')
            };

            // Atualiza os valores iniciais na tela
            atualizarExibicao();
        }

        function atualizarExibicao() {
            elementos.carisma.innerHTML = pontos.carisma;
            elementos.inteligencia.innerHTML = pontos.inteligencia;
            elementos.agilidade.innerHTML = pontos.agilidade;
            elementos.vigor.innerHTML = pontos.vigor;
            elementos.sangue.innerHTML = pontos.sangue;
            elementos.totais.innerHTML = pontosAtributosTotais;
            elementos.vida.innerHTML = pontosVida;
            elementos.sanidade.innerHTML = pontosSanidade;
            elementos.defesa.innerHTML = pontosDefesa;
        }

        function pontuação(numero, atributo) {

            if (numero === 1 && pontos[atributo] >= 5) {
                alert("Quantidade máxima alcançada");
                return;
            }
            if (numero === -1 && pontos[atributo] <= 0) {
                alert("Quantidade mínima alcançada");
                return;
            }
            if (numero === 1 && pontosAtributosTotais <= 0) {
                alert("Quantidade de pontos total acabou");
                return;
            }

            pontosAtributosTotais -= numero;
            pontos[atributo] += numero;
            pontosVida = 20 * pontos.vigor;
            pontosSanidade = 20 + (10 * pontos.inteligencia)
            pontosDefesa = 5 + pontos.agilidade;
            console.log(pontosVida);
            if (pontosVida == 0) {
                pontosVida = 20;
            }
            atualizarExibicao();

            // Animação
            let elementoAlterado = elementos[atributo];

            elementoAlterado.classList.add("troca");
            setTimeout(() => elementoAlterado.classList.remove("troca"), 300);
            elementos.totais.classList.add("troca");
            setTimeout(() => elementos.totais.classList.remove("troca"), 300);
        }

        function habilidades() {

            div_conteudoHabilidades.style.display = ""
            div_conteudoAtributos.style.display = "none"
            div_conteudoClasse.style.display = "none"
            div_conteudoInicio.style.display = "none"


            div_conteudoHabilidades.innerHTML = textoHabilidades;
            atualizarPontosHabilidades()
        }
        function atualizarPontosHabilidades() {
            div_containerTransformacoes.style.display = "none";
            div_containerhabilidadesGerais.style.display = "none";
            div_containerSensoriais.style.display = "none";
            pontos_Habilidade.innerHTML = pontosHabilidade
        }

        function aparicoes(item) {
            if (item == 1 && cliquesGeral == 0) {
                cliquesGeral++
                div_containerhabilidadesGerais.style.display = ""
            }
            else if (item == 1 && cliquesGeral == 1) {
                cliquesGeral = 0;
                div_containerhabilidadesGerais.style.display = "none"
            }
            if (item == 2 && cliquesTrans == 0) {
                cliquesTrans++
                div_containerTransformacoes.style.display = ""
            }
            else if (item == 2 && cliquesTrans == 1) {
                cliquesTrans = 0;
                div_containerTransformacoes.style.display = "none"
            }
            if (item == 3 && cliquesSensiveis == 0) {
                cliquesSensiveis++
                div_containerSensoriais.style.display = ""
            }
            else if (item == 3 && cliquesSensiveis == 1) {
                cliquesSensiveis = 0;
                div_containerSensoriais.style.display = "none"
            }
        }
    </script>