<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/heade&footer.css">
    <link rel="stylesheet" href="../css/Ficha.css">
    <link rel="stylesheet" href="../css/alerta.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Ficha</title>
</head>

<body onload="logado()">
    <header id="header"></header>
    <div id="containerSair"></div>
    <div id="div_Alerta" class="alerta">
        <img class="morcego" src="assets/img/morcegoCimaPreto.png">
        <div id="conteudo_alerta"></div>
    </div>
    <div class="conteudo" id="div_conteudo">
        <div class="inicia centralizarl">
            <h2>Nenhum personagem encontrado!</h2>
            <button onclick="inicio()"><i class='bx bx-plus-medical'></i> Criar Personagem</button>
        </div>
    </div>
    <div class="conteudo">
        <div id="div_conteudoInicio" class="inicial">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoClasse">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoAtributos">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoHabilidades">

        </div>
    </div>
    <div id="botaozao" class="big-botao">
        <button onclick="salvarInfos()">Salvar Ficha</button>
    </div>
    <dialog id="FichaCompleta">

    </dialog>

</body>
<script src="js/header.js"></script>
<script src="js/inners.js"></script>
<script src="js/div_alerta.js"></script>
<script>
    botaozao.style.display = "none"
    let pontosAtributosTotais = 10;
    let pontosVida = 20;
    let pontosSanidade = 20;
    let pontosDefesa = 5;
    let armadura = 0;

    let pontos = {
        carisma: 0,
        inteligencia: 0,
        agilidade: 0,
        vigor: 0,
        sangue: 0,
    };

    // Objeto para armazenar os elementos DOM que mostram os valores
    let elementos = {};

    function logado() {
        if (sessionStorage.ID_USUARIO != undefined) {

        }
        else {
            div_conteudo.innerHTML = `
             <div class="inicial">
            <h2>Logar para ver os personagens</h2>
            <br<br>
            <button onclick="window.location='login.html'">Logar</button>
            </div>
            `
        }
    }
    let cliquesGeral = 0;
    let cliquesTrans = 0;
    let cliquesSensiveis = 0;
    let gerarInicio = false;
    let gerarClasse = false;
    let classes = {};
    function inicio() {
        div_conteudo.style.display = "none"
        div_conteudoInicio.style.display = ""
        div_conteudoClasse.style.display = "none"
        div_conteudoAtributos.style.display = "none"
        div_conteudoHabilidades.style.display = "none"
        botaozao.style.display = "block"
        if (gerarInicio == false) {
            gerarInicio = true;
            div_conteudoInicio.innerHTML = textoInicio
        }
    }

    function classe() {
        div_conteudoInicio.style.display = "none"
        div_conteudoAtributos.style.display = "none"
        div_conteudoHabilidades.style.display = "none"
        botaozao.style.display = ""
        div_conteudoClasse.style.display = ""
        if (gerarClasse == false) {
            gerarClasse = true
            div_conteudoClasse.innerHTML = textoClasse
        }
        classes = {
            cacador: document.getElementById('cacador'),
            barbaro: document.getElementById('barbaro'),
            ilusionista: document.getElementById('ilusionista'),
            senhor: document.getElementById('senhor'),
            cultista: document.getElementById('cultista'),
            iluminado: document.getElementById('iluminado'),
            flagelador: document.getElementById('flagelador'),
            canibal: document.getElementById('canibal')
        };
    }

    function aparecer(item) {
        classes[item].showModal();

        if (classes['cacador']) {
            desc_cacador.innerHTML = `
                <h3>Ca√ßador Sombrio</h3>
        <p>
            Diferente de outros vampiros que matam por necessidade ou prazer imediato, o Ca√ßador Sombrio se deleita no
            jogo da ca√ßa. Ele rastreia suas presas por dias, at√© semanas, estudando cada movimento antes de atacar. Seus
            sentidos, j√° sobre-humanos, foram agu√ßados ao ponto de perceber o menor sussurro no vento ou o mais t√™nue
            cheiro de medo.
        </p>
        <ul>
            <li>
                Agilidade aumentada: Aumenta a chance de esquiva e ataques furtivos.[+3 pontos de agilidade]
            </li>
            <li>
                Habilidade de persegui√ß√£o: Pode rastrear presas com facilidade, seus sentidos foram treinados ao
                m√°ximo.[vantagem nas trilhas sensoriais, qualquer teste sensorial tem vantagem.]
            </li>
            <li>
                Resist√™ncia a ataques furtivos: Dif√≠cil de ser pego de surpresa por outros vampiros ou ca√ßadores. [+2
                pontos de Sangue Ancestral]
            </li>
        </ul>
        <h4>Desvantagens:</h4>
        <p>
            Obcecado pela Ca√ßa: O Ca√ßador Sombrio n√£o consegue resistir ao impulso de ca√ßar. Sempre que est√° diante de
            uma presa em potencial, precisa realizar um teste de Intelig√™ncia para evitar persegui-la, independentemente
            da situa√ß√£o. Falhar no teste pode coloc√°-lo e seus aliados em risco.
        </p>
        <p>
            Isolamento Natural: A natureza predat√≥ria do Ca√ßador Sombrio o torna antissocial. Ele tem dificuldade em
            formar la√ßos ou cooperar com outros. [-2 de carisma]
        </p>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+3 de agilidade</div>
            <div class="caixa">+2 sangue ancestral</div>
            <div class="caixa">vantagem na trilha sensorial</div>
            <div class="caixa">-2 carisma</div>
        </div>
        <br>
        <button onclick="fechar('cacador')">Fechar</button>
                `
        }

        if (classes['senhor']) {
            desc_senhor.innerHTML = `<h3>Senhor das Sombras</h3>
        <p>
            Na escurid√£o mais profunda, onde at√© mesmo outros vampiros hesitam em pisar, reside o Senhor das Sombras.
            Ele n√£o apenas abra√ßou a noite ‚Äî tornou-se parte dela. Seu dom√≠nio sobre as trevas vai al√©m da simples
            aus√™ncia de luz; as sombras sussurram segredos proibidos, escondem-no de olhos indesejados e dobram-se √† sua
            vontade.
        </p>
        <ul>
            <li>
                Controle mental aprimorado: Facilita a manipula√ß√£o de criaturas fracas ou at√© humanos, for√ßando-os a
                fazer sua vontade.[vantagem na trilha da habilidade mental]
            </li>
            <li>
                as sombras o protegem e o ajudam a se defender contra os mal intencionados que tentam descobrir os seus
                segredos por meio de invas√µes[+2 pontos de intelig√™ncia e sangue ancestral]
            </li>
            <li>
                Transforma√ß√£o em n√©voa ou sombra: o senhor das sombras tem uma facilidade maior com todo o obscuro, ele
                ouve as sombras sussurrando em seu ouvido[vantagem na trilha das transforma√ß√µes de n√©voa e sombra]
            </li>
        </ul>
        <h4>Desvantagens:</h4>
        <p>
            Eco Sombrio ‚Äì As sombras o ouvem tanto quanto ele as ouve. Seu constante contato com a escurid√£o perturba
            sua mente, tornando dif√≠cil distinguir realidade de ilus√£o. Sempre que tenta usar sua habilidade de Controle
            Mental ou Transforma√ß√£o Sombria, deve fazer um teste de Intelig√™ncia. Se falhar, escutar√° sussurros
            incoerentes ou falsas vis√µes que podem lev√°-lo a tomar decis√µes erradas, ou at√© mesmo tra√≠-lo no momento
            mais crucial.
        </p>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+2 de intelig√™ncia</div>
            <div class="caixa">+2 sangue ancestral</div>
            <div class="caixa">vantagem na trilha da habilidade mental</div>
            <div class="caixa">vantagem na trilha das transforma√ß√µes de n√©voa e sombra</div>
        </div>
        <br>
        <button onclick="fechar('senhor')">Fechar</button>
        `
        }

        if (classes['barbaro']) {
            desc_barbaro.innerHTML = `
                <h3>B√°rbaro Noturno</h3>
        <p>
            O B√°rbaro Noturno √© a encarna√ß√£o da f√∫ria e da brutalidade sob o manto da escurid√£o. Este vampiro √© uma
            for√ßa impar√°vel no campo de batalha, utilizando sua for√ßa bruta e resili√™ncia sobrenatural para esmagar
            inimigos e resistir a ataques devastadores. Alimentado pela escurid√£o, sua f√∫ria aumenta √† medida que o
            combate se intensifica.
        </p>
        <h2>Vantagnes:</h2>
        <ul>
            <li>
                +2 Vigor (aumenta a vida e a resist√™ncia a ataques)
            </li>
            <li>
                vantagem na trilha da habilidade For√ßa (dano f√≠sico aprimorado)
            </li>
        </ul>
        <h4>Desvantagens:</h4>
        <ul>
            <li>
                -2 Intelig√™ncia (impulsivo e focado na brutalidade)
            </li>
        </ul>
        <p>
            For√ßa da Noite: Ataques f√≠sicos causam 1D4 de dano durante a noite ou em ambientes escuros.
            Pele de Ferro Sombria: A sua velocidade e defesa aumentam por sua vontade e √¢nsia pela batalha +5 de
            agilidade.
        </p>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+2 de vigor</div>
            <div class="caixa">-2 de intelig√™ncia</div>
            <div class="caixa">vantagem na trilha da habilidade For√ßa </div>
            <div class="caixa">1D4 de dano durante a noite</div>
        </div>
                <button onclick="fechar('barbaro')">Fechar</button>`
        }

        if (classes['ilusionista']) {
            desc_ilusionista.innerHTML = `
                <h3>Ilusionista Vamp√≠rico</h3>
        <p>
            O Ilusionista Vamp√≠rico √© um mestre da manipula√ß√£o mental e do engano. Capaz de distorcer a realidade e
            controlar as mentes daqueles ao seu redor, este vampiro utiliza suas habilidades para confundir inimigos,
            criar ilus√µes e assumir o controle do campo de batalha sem levantar um dedo. Suas artes sombrias s√£o tanto
            uma arma quanto uma defesa, tornando-o um oponente imprevis√≠vel.
        </p>
        <ul>
            <li>
                +2 Intelig√™ncia (melhora o controle mental e resist√™ncia a manipula√ß√£o)
            </li>
            <li>
                +2 Carisma (aperfei√ßoa intera√ß√µes sociais e o poder de persuas√£o)
            </li>
            <li>
                O vampiro tem dificuldades com armas de combate f√≠sico e se d√° melhor com armas e magias.
            </li>
        </ul>
        <p>
            Manipula√ß√£o das Emo√ß√µes: Capacidade de alterar os sentimentos e pensamentos de outras criaturas. [vantagem
            em testes de controle mental e persuas√£o].
        </p>
        <h4>Desvantagens:</h4>
        <p>
            Fragilidade F√≠sica: Menor resist√™ncia a ataques f√≠sicos<br>[-3 de vigor]
        </p>
        <h4>Itens iniciais</h4>
        <ul>
            <li>
                Um baralho completo
            </li>
            <li>
                Um pendulo
            </li>
            <li>
                2 moedas de ouro
            </li>
        </ul>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+2 de Carisma</div>
            <div class="caixa">+2 de Intelig√™ncia</div>
            <div class="caixa">Vantagem em testes de controle mental e persuas√£o</div>
            <div class="caixa">Dificuldades com armas de combate f√≠sico</div>
            <div class="caixa">-3 vigor</div>
            <div class="caixa">Se d√° melhor com armas e magias.</div>
        </div>
        <button onclick="fechar('ilusionista')">Fechar</button>
                `
        }

        if (classes['cultista']) {
            desc_cultista.innerHTML = `
            <h3>Vampiro Cultista</h3>
        <p>
            O Vampiro Cultista trilha o caminho das trevas, dedicando-se a for√ßas malignas em busca de poder absoluto.
            Essa devo√ß√£o concede acesso a magias sombrias, transforma√ß√µes demon√≠acas e uma conex√£o natural com armas
            demon√≠acas. No entanto, essa alian√ßa cobra seu pre√ßo, afetando sua sanidade e tornando-o vulner√°vel a luz
            sagrada.
        </p>
        <ul>
            <li>
                +2 Sangue Ancestral (pela conex√£o com as for√ßas malignas)
            </li>
            <li>
                +1 Intelig√™ncia (pela manipula√ß√£o de magias e rituais)
            </li>
        </ul>
        <p>
            Afinidade Demon√≠aca: Armas demon√≠acas causam +2 de dano e n√£o exigem testes de afinidade para uso.
            Mente Corrompida: Recebe vantagem em resistir a controle mental de outras criaturas, mas sofre desvantagem
            contra magias de luz e sagrada.
        </p>
        <p>
            Rituais de Sangue: Pode usar o pr√≥prio sangue para realizar rituais sombrios, sacrificando pontos de vida
            para ganhar b√¥nus tempor√°rios em transforma√ß√µes ou habilidades.
        </p>
        <h4>Desvantagens</h4>
        <ul>
            <li>
                -1 Carisma (devido √† aura perturbadora que emana)
            </li>
            <li>
                Caso fique muito tempo longe de sua divindade ele ir√° perder sanidade.
            </li>
        </ul>
        <h3>Divindades:</h3>
        <h4>Cthulhu, o caos</h4>
        <p>
            um monstro abissal, que apenas o pensar sobre j√° o enlouquece, os vampiros que o seguem adoram o caos e
            fazem as suas vontades.
        </p>
        <h4>Velka, a Senhora dos Lamentos</h4>
        <p>
            Deusa da tristeza e do amor perdido. Dizem que ela chora por cada alma condenada a vagar eternamente. Muitos
            vampiros rom√¢nticos a veneram, buscando conforto ou reden√ß√£o.
        </p>
        <h4>Draeven, o Devorador de Almas </h4>
        <p>
            Deus do terror e da loucura. Ele corrompe vampiros e mortais, transformando-os em criaturas bestiais.
            Adorado por cultistas que desejam se fundir com a escurid√£o absoluta.
        </p>
        <h4>Nytheris, a Dama do Eclipse</h4>
        <p>
            Deusa da noite eterna e do sil√™ncio. Seus seguidores acreditam que a escurid√£o √© um santu√°rio e buscam viver
            na sombra.
        </p>
        <h4>Sanguara, a Guardi√£ da Maldi√ß√£o</h4>
        <p>

            Deusa que criou o primeiro vampiro. Seus seguidores acreditam que os vampiros s√£o tanto um fardo quanto uma
            d√°diva. Alguns a veneram buscando reden√ß√£o, enquanto outros abra√ßam sua maldi√ß√£o.
        </p>
        <h4>Itens iniciais:</h4>
        <ul>
            <li>
                Um papel com algumas escritas antigas
            </li>
            <li>
                Sangue para ritual
            </li>
            <li>
                5 moedas de ouro
            </li>
            <li>
                Uma t√∫nica surrada
            </li>
        </ul>
        <h3>Resumo:</h3>
                <div class="grid">
            <div class="caixa">+2 sangue ancestral</div>
            <div class="caixa">+ 1 de intelig√™ncia</div>
            <div class="caixa">-1 carisma</div>
            <div class="caixa">+2 de dano com armas demon√≠acas</div>
            <div class="caixa">Fraco a danos sagrados e de luz</div>
            <div class="caixa">Vantagens em testes de resist√™ncia a controle mental</div>
    </div>
    <br>

        <button onclick="fechar('cultista')">Fechar</button>
            `
        }

        if (classes['iluminado']) {
            desc_iluminado.innerHTML = `
                        <h3>Vampiro iluminado</h3>
        <p>
            O Vampiro Iluminado carrega consigo a f√© e os princ√≠pios de sua vida passada. Lutando contra a corrup√ß√£o
            inerente da maldi√ß√£o vamp√≠rica, ele busca manter sua humanidade e usar sua condi√ß√£o para proteger outros dos
            horrores que enfrentou. Sua conex√£o com o sagrado √© √∫nica, permitindo-lhe empunhar armas aben√ßoadas e
            resistir melhor a ataques de luz, mas sua relut√¢ncia em aceitar a verdadeira natureza vamp√≠rica o torna
            menos poderoso em habilidades sombrias.
        </p>
        <ul>
            <li>+2 Carisma (pela presen√ßa inspiradora e aura de f√©)</li>
            <li>
                +1 Intelig√™ncia (pela sabedoria acumulada de sua f√©)
            </li>
            <li>
                -5 Sangue Ancestral (pela rejei√ß√£o √†s for√ßas malignas que alimentam o poder vamp√≠rico)
            </li>
        </ul>
        <p>
            <strong>Resist√™ncia Sagrada:</strong> Recebe 1d4 a menos de dano de ataques sagrados e de luz.
            <strong>Afinidade Aben√ßoada:</strong> Armas aben√ßoadas causam +2 de dano e podem ser imbu√≠das com efeitos de
            luz.
            <strong>Humanidade Preservada:</strong> Testes para resistir ao frenesi ou impulsos bestiais t√™m vantagem.
            Al√©m disso, o Vampiro Iluminado mant√©m sua apar√™ncia mais humana, passando despercebido em ambientes
            sociais.
            a cada habilidade sombria adquirida o jogador deve rolar um teste para saber se Deus ainda o v√™
        </p>
        <p>
            Sempre que o Vampiro Iluminado adquirir ou utilizar uma habilidade sombria, deve realizar um Teste de F√©
            para determinar se ainda mant√©m a conex√£o com sua divindade.
        </p>
        <ul>
            <li>
                Teste de F√©: 1D20 + Carisma
            </li>
            <li>
                Resultado 15 ou mais: A divindade ainda o v√™ com compaix√£o, sem penalidades.
            </li>
            <li>
                Resultado entre 10 e 14: A conex√£o enfraquece. O personagem perde 5 de sanidade.
            </li>
            <li>
                Resultado abaixo de 10: O personagem perde temporariamente as habilidades sagradas e recebe desvantagem
                em testes relacionados √† f√© at√© realizar um ritual de reden√ß√£o.
            </li>
        </ul>
        <h4>Itens iniciais</h4>
        <ul>
            <li>
                um par de luvas brancas
            </li>
            <li>
                Uma b√≠blia de bolso
            </li>
            <li>
                5 moedas de ouro
            </li>
        </ul>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+2 de carisma</div>
            <div class="caixa">+ 1 de intelig√™ncia</div>
            <div class="caixa">-5 de sangue ancestral</div>
            <div class="caixa"> Armas aben√ßoadas causam +2 de dano</div>
            <div class="caixa">Testes para resistir ao frenesi ou impulsos bestiais t√™m vantagem</div>
            <div class="caixa">Sempre que o Vampiro Iluminado adquirir ou utilizar uma habilidade sombria, deve realizar um Teste de F√©</div>
            <br>
            <button onclick="fechar('iluminado')">Fechar</button>
                `
        }

        if (classes['flagelador']) {
            desc_flagelador.innerHTML = `
                        <h3>Vampiro flagelador
        </h3>
        <p>
            Para o Vampiro Flagelador, a dor n√£o √© um fardo, mas uma fonte de poder. Cada ferida, cada gota de sangue
            derramada √© um catalisador que transforma sofrimento em for√ßa bruta. Eles s√£o mestres em utilizar o pr√≥prio
            corpo como arma, infligindo dor a si mesmos para liberar habilidades devastadoras. Suas cicatrizes contam
            hist√≥rias de batalhas onde a agonia foi sua maior aliada.
        </p>
        <ul>
            <li>
                +3 Sangue Ancestral (capacidade de suportar e transformar dor em poder)
            </li>
            <li>
                +1 Agilidade (reflexos r√°pidos para ataques precisos e auto-flagela√ß√£o controlada)
            </li>
            <li>
                -1 Carisma (a apar√™ncia macabra e comportamento perturbador afastam os outros)
            </li>
        </ul>
        <p>
            <strong>Dor Revigorante:</strong> Sempre que o Vampiro Flagelador recebe dano, ele dar√° +1 de dano no
            pr√≥ximo turno.
            <strong>Toler√¢ncia Sobrenatural:</strong> Imune a efeitos de dor ou atordoamento que afetariam o foco ou
            movimento.
        </p>
        <h4>Desvantagens:</h4>
        <p>
            <strong>Dependente da Dor:</strong> Habilidades causam menos dano ou falham caso o Vampiro Flagelador esteja
            com vida cheia.
            <strong>Instabilidade Mental:</strong> Testes para resistir a efeitos mentais t√™m desvantagem, pois o
            sofrimento constante o deixa vulner√°vel a manipula√ß√µes.
        </p>
        <h4>Itens Iniciais:</h4>
        <ul>
            <li>
                faca desgastada - 1d4 de dano
            </li>
            <li>
                frasco vazio
            </li>
            <li>
                3 moedas de bronze
            </li>
        </ul>
        <h3>Resumo: </h3>
        <div class="grid">
            <div class="caixa">+3 de sangue ancestral</div>
            <div class="caixa">+ 1 de agilidade</div>
            <div class="caixa">-1 de carisma</div>
            <div class="caixa">Recebeu um dano, dar√° +1 de dano no pr√≥ximo turno</div>
            <div class="caixa">Imune a efeitos de dor ou atordoamento</div>
            <div class="caixa">Testes para resistir a efeitos mentais t√™m desvantagem</div>
        </div>
            <br>

        <button onclick="fechar('flagelador')">Fechar</button>
                `
        }

        if (classes['canibal']) {
            desc_canibal.innerHTML = `
                            <h3>Vampiro Canibal</h3>
        <p>
            O Vampiro Canibal √© uma criatura temida at√© mesmo entre os da sua esp√©cie. Alimenta-se do sangue de outros
            vampiros, extraindo deles n√£o apenas sua vitalidade, mas tamb√©m parte de seus poderes. No entanto, cada gota
            consumida o aproxima da loucura. Este vampiro vive no limite entre o poder absoluto e a autodestrui√ß√£o.
        </p>
        <h4>B√¥nus de Atributos:</h4>
        <ul>
            <li>+3 Sangue Ancestral e vigor(fortalece suas transforma√ß√µes e resist√™ncia)</li>
            <li>
                -2 Carisma (sua natureza predat√≥ria o torna assustador e repulsivo para outros vampiros)
            </li>
            <li>
                A classe canibal √© uma das √∫nicas que inflige o dano vital
            </li>
        </ul>
        <p>
            <strong>Predador da Noite:</strong> Ao consumir o sangue de outros vampiros, recupera rapidamente vida e
            ganha um b√¥nus tempor√°rio diversos tipos de teste por 2 turnos.
            <strong>Fome Eterna:</strong> Sempre que um vampiro inimigo estiver a menos de 5 metros, o Vampiro Canibal
            sente sua presen√ßa e tem vantagem em rastre√°-lo.
        </p>
        <h4>Desvantagens:</h4>
        <p>
            <strong>Perda de Sanidade:</strong> A cada vez que consome sangue vamp√≠rico, deve realizar um teste de
            Intelig√™ncia. Falhar no teste faz com que o Vampiro Canibal perca parte de sua sanidade.
            <strong>Rejei√ß√£o Social:</strong> Outros vampiros percebem sua natureza predat√≥ria, tornando intera√ß√µes
            sociais com sua esp√©cie extremamente dif√≠ceis.
        </p>
        <h4>Itens Iniciais:</h4>
        <ul>
            <li>
                Faca desgastada - 1d4 de dano

            </li>
            <li>
                Frasco vazio
            </li>
            <li>
                3 moedas de bronze
            </li>
        </ul>
         <h3>Resumo: </h3>
        <div class="grid">
            <div class="caixa">+3 de sangue ancestral</div>
            <div class="caixa">-2 de carisma</div>
            <div class="caixa">Inflige o dano vital</div>
            <div class="caixa">Sangue de vampiro recupera vida</div>
            <div class="caixa">Beber sangue de vampiro, teste de sanidade</div>
            <div class="caixa">Vantagem em rastreio</div>
        </div>
                <br>
                <button onclick="fechar('canibal')">Fechar</button>
                `
        }

    }

    function fechar(item) {
        classes[item].close()
    }

    function atributos() {
        div_conteudoClasse.style.display = "none"
        div_conteudoInicio.style.display = "none"
        div_conteudoHabilidades.style.display = "none"
        botaozao.style.display = "block"
        div_conteudoAtributos.style.display = "block"

        div_conteudoAtributos.innerHTML = textoAtributos

        // Agora atribuimos os elementos aos campos
        elementos = {
            carisma: document.getElementById('qtd_carisma'),
            inteligencia: document.getElementById('qtd_inteligencia'),
            agilidade: document.getElementById('qtd_agilidade'),
            vigor: document.getElementById('qtd_vigor'),
            sangue: document.getElementById('qtd_sangue_ancestral'),
            totais: document.getElementById('pontos_totais'),
            vida: document.getElementById('qtd_vida'),
            sanidade: document.getElementById('qtd_sanidade'),
            defesa: document.getElementById('qtd_defesa')
        };

        // Atualiza os valores iniciais na tela
        atualizarExibicao();
    }

    function atualizarExibicao() {
        elementos.carisma.innerHTML = pontos.carisma;
        elementos.inteligencia.innerHTML = pontos.inteligencia;
        elementos.agilidade.innerHTML = pontos.agilidade;
        elementos.vigor.innerHTML = pontos.vigor;
        elementos.sangue.innerHTML = pontos.sangue;
        elementos.totais.innerHTML = pontosAtributosTotais;
        elementos.vida.innerHTML = pontosVida;
        elementos.sanidade.innerHTML = pontosSanidade;
        elementos.defesa.innerHTML = pontosDefesa;
    }

    function pontua√ß√£o(numero, atributo) {

        if (numero === 1 && pontos[atributo] >= 5) {

            return funcao_alerta("Quantidade m√°xima alcan√ßada");
        }
        if (numero === -1 && pontos[atributo] <= 0) {

            return funcao_alerta("Quantidade m√≠nima alcan√ßada");
        }
        if (numero === 1 && pontosAtributosTotais <= 0) {

            return funcao_alerta("Quantidade de pontos total acabou");
        }

        pontosAtributosTotais -= numero;
        pontos[atributo] += numero;
        pontosVida = 20 * pontos.vigor;
        pontosSanidade = 20 + (10 * pontos.inteligencia)
        pontosDefesa = 5 + pontos.agilidade;
        console.log(pontosVida);
        if (pontosVida == 0) {
            pontosVida = 20;
        }
        atualizarExibicao();

        // Anima√ß√£o
        /*let elementoAlterado = elementos[atributo];

        elementoAlterado.classList.add("troca");
        setTimeout(() => elementoAlterado.classList.remove("troca"), 300);
        elementos.totais.classList.add("troca");
        setTimeout(() => elementos.totais.classList.remove("troca"), 300);*/
    }
    let pontosHabilidadeGeral = 4;
    const PontosHabilidades = {
        geral: 4,
        transformacoes: 2,
        sensorias: 6
    }
    const arvoresGerais = {
        garras: {
            base: ['Garras Sobrenaturais'],
            esquerda: ['Corte r√°pido', 'Frenesi de garras', 'Rasgo da destrui√ß√£o'],
            direita: ['Garras envenedadas', 'Destruidor de armaduras', 'Rasgo Sombrio'],
            caminhoEscolhido: null,
            progresso: 0,
            habilidadesDesbloqueadas: []
        },
        voo: {
            base: ['Super Salto'],
            esquerda: ['Flutuar', 'Mergulho a√©reo', 'Teleporte sombrio'],
            direita: ['Flutuar', 'Investida a√©rea', 'Vo√¥ profano'],
            caminhoEscolhido: null,
            progresso: 0,
            habilidadesDesbloqueadas: []
        }
    };

    let caminhoEscolhidoGeral = null; // 'esquerda' ou 'direita'
    let progressoGeral = 0;

    function habilidades() {

        div_conteudoHabilidades.style.display = "block"
        botaozao.style.display = "block"
        div_conteudoAtributos.style.display = "none"
        div_conteudoClasse.style.display = "none"
        div_conteudoInicio.style.display = "none"

        div_conteudoHabilidades.innerHTML = textoHabilidades;
        pontos_Habilidade.innerHTML =
            `
        <h3>Pontos de habilidade</h3>
        <p>${pontosHabilidadeGeral}</p>
        ` ;
        document.getElementById("div_containerhabilidadesGerais").style.display = "none";
        div_containerTransformacoes.style.display = "none"
        div_containerSensoriais.style.display = "none"
    }



    function atualizarPontosHabilidades(valor, tipo, nomeHabilidade) {
        let grupo = null;

        for (let chave in arvoresGerais) {
            const arvore = arvoresGerais[chave];
            if (
                arvore.base.includes(nomeHabilidade) ||
                arvore.esquerda.includes(nomeHabilidade) ||
                arvore.direita.includes(nomeHabilidade)
            ) {
                grupo = chave;
                break;
            }
        }

        if (!grupo) {
            return funcao_alerta("Habilidade n√£o reconhecida.");
        }

        const arvore = arvoresGerais[grupo];
        const base = arvore.base[0];
        const desbloqueadas = arvore.habilidadesDesbloqueadas;

        // REVERS√ÉO
        const ultimaHabilidade = desbloqueadas[desbloqueadas.length - 1];
        if (nomeHabilidade === ultimaHabilidade) {
            // Reverte progresso
            arvore.habilidadesDesbloqueadas.pop();
            PontosHabilidades[tipo] -= valor; // valor √© negativo, ent√£o -(-1) = +1
            arvore.progresso--;

            if (nomeHabilidade === base) {
                arvore.caminhoEscolhido = null;
            }

            return atualizarHTML(tipo);
        }

        // üö´ J√° desbloqueada mas n√£o √© a √∫ltima: bloqueia
        if (desbloqueadas.includes(nomeHabilidade)) {
            return funcao_alerta("S√≥ √© poss√≠vel remover a √∫ltima habilidade desbloqueada.");
        }

        // PRIMEIRA HABILIDADE (base)
        if (arvore.progresso === 0 && nomeHabilidade !== base) {
            return funcao_alerta("Voc√™ precisa desbloquear a habilidade inicial primeiro.");
        }

        if (nomeHabilidade === base) {
            if (PontosHabilidades[tipo] + valor < 0) {
                return funcao_alerta("Pontos insuficientes");
            }

            PontosHabilidades[tipo] += valor;
            arvore.progresso = 1;
            desbloqueadas.push(nomeHabilidade);
            return atualizarHTML(tipo);
        }

        // Escolher caminho
        if (!arvore.caminhoEscolhido) {
            if (arvore.esquerda.includes(nomeHabilidade)) {
                arvore.caminhoEscolhido = 'esquerda';
            } else if (arvore.direita.includes(nomeHabilidade)) {
                arvore.caminhoEscolhido = 'direita';
            } else {
                return funcao_alerta("Habilidade inv√°lida.");
            }
        }

        const caminho = arvore[arvore.caminhoEscolhido];

        if (!caminho.includes(nomeHabilidade)) {
            return funcao_alerta("Voc√™ j√° escolheu outro caminho. Essa habilidade n√£o est√° dispon√≠vel.");
        }

        if (caminho[arvore.progresso - 1] !== nomeHabilidade) {
            return funcao_alerta("Desbloqueie as habilidades na ordem correta.");
        }

        if (PontosHabilidades[tipo] + valor < 0) {
            return funcao_alerta("Pontos insuficientes");
        }

        PontosHabilidades[tipo] += valor;
        arvore.progresso++;
        desbloqueadas.push(nomeHabilidade);
        atualizarHTML(tipo);
        setTimeout(() => {
            atualizarEstilos(arvore.caminhoEscolhido, arvore.habilidadesDesbloqueadas);
        }, 10);

    }

    function atualizarEstilos(trilha, desbloqueadas) {
        const botoes = document.querySelectorAll('button');

        botoes.forEach(botao => {
            const texto = botao.textContent.trim();

            // Atualiza estado de sele√ß√£o
            if (desbloqueadas.includes(texto)) {
                botao.classList.add('habilidade-selecionada');
            } else {
                botao.classList.remove('habilidade-selecionada');
            }

            // Desativa a trilha oposta
            const colunaEsquerda = document.querySelectorAll('.trilha-esquerda button');
            const colunaDireita = document.querySelectorAll('.trilha-direita button');

            if (trilha === 'esquerda') {
                colunaDireita.forEach(btn => btn.classList.add('habilidade-desativada'));
                colunaEsquerda.forEach(btn => btn.classList.remove('habilidade-desativada'));
            } else if (trilha === 'direita') {
                colunaEsquerda.forEach(btn => btn.classList.add('habilidade-desativada'));
                colunaDireita.forEach(btn => btn.classList.remove('habilidade-desativada'));
            } else {
                // Nenhum caminho escolhido ainda: ativa tudo
                colunaEsquerda.forEach(btn => btn.classList.remove('habilidade-desativada'));
                colunaDireita.forEach(btn => btn.classList.remove('habilidade-desativada'));
            }
        });
    }

    function atualizarHTML(tipo) {
        pontos_Habilidade.innerHTML = `
        <h3>Pontos de habilidade</h3>
        <p>${PontosHabilidades[tipo]}</p>
    `;
    }


    function aparicoes(item) {
        if (item == 1 && cliquesGeral == 0) {
            cliquesGeral++
            div_containerhabilidadesGerais.style.display = ""
        }
        else if (item == 1 && cliquesGeral == 1) {
            cliquesGeral = 0;
            div_containerhabilidadesGerais.style.display = "none"
        }
        if (item == 2 && cliquesTrans == 0) {
            cliquesTrans++
            div_containerTransformacoes.style.display = ""
        }
        else if (item == 2 && cliquesTrans == 1) {
            cliquesTrans = 0;
            div_containerTransformacoes.style.display = "none"
        }
        if (item == 3 && cliquesSensiveis == 0) {
            cliquesSensiveis++
            div_containerSensoriais.style.display = ""
        }
        else if (item == 3 && cliquesSensiveis == 1) {
            cliquesSensiveis = 0;
            div_containerSensoriais.style.display = "none"
        }
    }
    let classePersonagem = "Nenhuma";
    function salvarClasse(classe) {
        classePersonagem = classe;
        console.log(classePersonagem)
    }
    function salvarInfos() {
        let nomePersonagem = ipt_nome.value;
        let alturaPersonagem = ipt_altura.value;
        let pesoPersonagem = ipt_peso.value;
        let apelidoPersonagem = ipt_apelido.value;
        let generoPersonagem = select_genero.value;
        let idadePersonagem = ipt_idade.value;
        let historiaPersonagem = ipt_historia.value;
        let caracteristicasPersonagem = ipt_caracteristicas.value;

        if (generoPersonagem === "#") {
            generoPersonagem = "Nenhum"
        }
        if (nomePersonagem === "") {
            nomePersonagem = 'Nenhum Nome Definido'
        }
        if (apelidoPersonagem === "") {
            apelidoPersonagem = "Nenhum Apelido Definido"
        }
        if (alturaPersonagem === "") {
            alturaPersonagem = "Nenhuma Altura Definida"
        }
        if (pesoPersonagem === "") {
            pesoPersonagem = "Nenhum Peso Definido"
        }
        if (idadePersonagem == "") {
            idadePersonagem = "Nenhuma Idade Definida"
        }
        if (historiaPersonagem == "") {
            historiaPersonagem = "Nenhuma Historia Encontrada"
        }
        if (caracteristicasPersonagem == "") {
            caracteristicasPersonagem = "Nenhuma Caracteristica Encontrada"
        }
        //     pontos = {
        //     carisma: 0,
        //     inteligencia: 0,
        //     agilidade: 0,
        //     vigor: 0,
        //     sangue: 0,
        // };



        FichaCompleta.showModal()
        FichaCompleta.innerHTML =
            `
                    <div class="informacoes">
                    <img src="assets/img/vampireUser.png" alt="">
                    <h1>${apelidoPersonagem}</h1>
                    <h2>${nomePersonagem}</h2>
                    <div class="pontosBasicos">
                        <div class="itemBase">Vida:<p id="vida">${pontosVida}</p>
                        </div>
                        <div class="itemBase">Sanidade: <p id="sanidade">${pontosSanidade}</p>
                            </div>
                        <div class="itemBase">Defesa: <p id="defesa">${pontosDefesa}</p>
                        </div>
                    </div>
                    <div class="infosBase">
                        <p>Altura: ${alturaPersonagem}</p>
                        <p>Peso: ${pesoPersonagem}</p>
                        <p>Idade: ${idadePersonagem}</p>
                        <p>G√™nero: ${generoPersonagem}</p>
                    </div>
                    <div class="detalhesTexto">
                        <div class="texto">
                        <h3>Historia do Personagem</h3>
                        <p id="historiaPersonagem">
                            ${historiaPersonagem}
                        </p>
                        </div>
                        <div class="texto">
                            <h3>Caracteristicas do Personagem</h3>
                            <p id="caracteristicasPersonagem">
                                ${caracteristicasPersonagem}
                            </p>
                        </div>
                    </div>
                    <div class="classe">
                        <h3>Classe: </h3>
                        <p>
                            ${classePersonagem}
                        </p>    
                    </div>
                    <div id="grafico" class="grafico">
                        <h3>Atributos</h3>
                        <canvas id="graficosAtributos"></canvas>
                    </div>
                    <h3>
                    Habilidades
                    </h3>
                    <div class="botaoFechar">
                        <button onclick="FichaCompleta.close()">Voltar para a ficha</button>
                        <button onclick=""> Salvar ficha</button>
                    </div>
                    </div>
                    `

        if (pontos.carisma == 0 && pontos.inteligencia == 0 && pontos.agilidade == 0 && pontos.vigor == 0 && pontos.sangue == 0) {
            grafico.innerHTML =
                `
                    <h3>Atributos</h3>
                    <p>Nenhum ponto adicionado</p>
                    `
        }
        let dadosAtributos = {
            labels: [],
            datasets: [{
                label: 'Atributos',
                data: pontos,
                borderColor: 'rgba(255, 0, 0)',
                tension: 0.1,
                borderWidth: 2
            }],
            options: {
                animation: {
                    duration: 1500,
                    easing: 'easeOutBounce'
                },
                //plugins: {
                //        // ...
                //        customImg: {
                //            // ...
                //           beforeDatasetsDraw: (chart, args) => {
                //                // ...
                //            }
                //        } 
                //    },
                scales: {
                    y: {
                        beginAtZero: true // Come√ßar o eixo y em zero
                    }
                }
            }
        }
        const config = {
            type: 'bar',
            data: dadosAtributos,
        };
        let Interesses = new Chart(
            document.getElementById(`graficosAtributos`),
            config
        );

    }
    let atualizarPontosGerais = document.getElementById('pontos_Habilidade')


</script>