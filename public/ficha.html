<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/heade&footer.css">
    <link rel="stylesheet" href="styles/novaFicha.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <title>Ficha</title>
</head>

<body>
    <header>
        <div class="logo">
            <a href="">
                <img src="assets/logoBranca.png" alt="Logo do Till the Fangz na versão branca">
            </a>
        </div>
        <div class="itens">
            <a href="../index.html">Home</a>
            <a href="livro.html">Livro</a>
            <a href="bestiario.html">Bestiário</a>
            <a href="quiz.html">Quiz</a>
            <a href="ficha.html">Ficha</a>
            <a href="feed.html">Feed</a>
            <a href="login.html" class="login"><img src="assets/vampireUser.png" alt="user"> Login</a>
        </div>
    </header>

    <div class="conteudo" id="div_conteudo">
        <div class="inicial">
            <h2>Nenhum personagem encontrado!</h2>
            <button onclick="inicio()">Criar Personagem</button>
        </div>
    </div>
    <div class="conteudo">
        <div id="div_conteudoInicio" class="inicial">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoClasse">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoAtributos">

        </div>
    </div>
    <div class="conteudo">
        <div class="inicial" id="div_conteudoHabilidades">

        </div>
    </div>


    <script>
        let gerarInicio = false;
        let classes = {};
        function inicio() {
            div_conteudo.style.display = "none"
            
            div_conteudoInicio.style.display = ""
            div_conteudoClasse.style.display = "none"
            div_conteudoAtributos.style.display = "none"
            div_conteudoHabilidades.style.display = "none"
            if (gerarInicio == false) {
                gerarInicio = true;

                div_conteudoInicio.innerHTML = `
                <div class="navbar">
                    <ul>
                        <li><a onclick="inicio()">Inicio</a></li>
                        <li><a onclick="classe()">Classe</a></li>
                        <li><a onclick="atributos()">Atributos</a></li>
                        <li><a onclick="habilidades()">Habilidades</a></li>
                    <ul>
                </div>

                <h2>Seja bem vindo ao criador de personagem!
                <br> Vamos começar pelo básico</h2>

                <div id="campos" class="camposiniciais">
                    <div class="inicio">
                        <div class="coluna1">
                            <input rows="1" placeholder="Nome..." id="ipt_nome" class="campo">  
                            <input type="number" placeholder="Altura..." id="ipt_altura" class="campo" >
                            <input type="number" placeholder="Peso..." id="ipt_peso" class="campo">
                            <input type="number" placeholder="Pontos sombrios" class="campo">

                        </div>
                        <div class="coluna2">
                            <input type="text" placeholder="Apelido..." id="ipt_apelido" class="campo">
                            <select id="select_genero" class="campo" >
                                    <option value="#">Gênero:</option>
                                    <option value="feminino">Feminino</option>
                                    <option value="masculino">Masculino</option>
                                    <option value="outro">Outro</option>
                                    <option value="nao">Prefiro não dizer</option>
                            </select>
                            <input type="number" placeholder="Idade..." id="ipt_idade" class="campo" >
                            <input type="number" placeholder="Pontos de luz" class="campo">

                        </div>
                    </div>
                     <div class="detalhes">
                        <textarea placeholder="História do personagem" id="ipt_historia" class="campo"></textarea>
                        <textarea placeholder="Características do personagem" id="" class="campo"></textarea>
                    </div>
                </div>
            `
            }
        }

        function classe() {
            div_conteudoInicio.style.display = "none"
            div_conteudoAtributos.style.display = "none"
            div_conteudoHabilidades.style.display = "none"
            div_conteudoClasse.style.display = ""
            div_conteudoClasse.innerHTML = `
                <div class="navbar">
                    <ul>
                        <li><a onclick="inicio()">Inicio</a></li>
                        <li><a onclick="classe()">Classe</a></li>
                        <li><a onclick="atributos()">Atributos</a></li>
                        <li><a onclick="habilidades()">Habilidades</a></li>
                    <ul>
                </div>
            <div class="cards">
                <div class="card">
                    <h3>Caçador Sombrio</h3>
                    <img src="assets/cacadorSombrio.png">
                <button onclick="aparecer('cacador')">Ver especificações</button>
                <dialog id="cacador">
                    <div class="modal" id="desc_cacador">
                    
                    </div>
                </dialog>
                <br>
                <button>Escolher Este</button>
                </div>

                <div class="card">
                    <h3>Senhor das Sombras</h3>
                    <img src="" alt="">
                <button onclick="aparecer('senhor')">Ver especificações</button>
                <dialog id="senhor">
                    <div class="modal" id="desc_senhor">
    
                    </div>
                </dialog>
                <br>
                <button>Escolher Este</button> 

                </div>

                <div class="card">
                    <h3>Bárbaro Noturno</h3>
                    <img src="" alt="">
                <button onclick="aparecer('barbaro')">Ver especificações</button>
                <dialog id="barbaro">
                    <div class="modal" id="desc_barbaro">
                    
                    </div>
                </dialog>
                <br>
                <button>Escolher Este</button> 

                </div>
                <div class="card">
                <h3>Ilusionista Vampírico</h3>
                <img src="" alt="">

                <button onclick="aparecer('ilusionista')">Ver especificações</button>
                <dialog id="ilusionista">
                    <div class="modal" id="desc_ilusionista">
                    
                    </div>
                </dialog>
                <br>
                <button>Escolher Este</button> 
                </div>

                <div class="card">
                    <h3>Vampiro Cultista</h3>
                    <img src="" alt="">

                <button onclick="aparecer('cultista')">Ver especificações</button>
                <dialog id="cultista">
                    <div class="modal" id="desc_cultista">
                    
                    </div>
                </dialog>
                <br>
                <button>Escolher Este</button> 
                </div>

                <div class="card">
                    <h3>Vampiro iluminado</h3>
                    <img src="" alt="">
                    <button onclick="aparecer('iluminado')">Ver especificações</button>
                    <dialog id="iluminado">
                        <div class="modal" id="iluminado">
                        
                        </div>
                    </dialog>
                    <br>
                    <button>Escolher Este</button> 
                </div>
                <div class="card">
                    <h3>Vampiro Flagelador</h3>
                    <img src="" alt="">
                    <button onclick="aparecer('flagelador')">Ver especificações</button>
                    <dialog id="flagelador">
                        <div class="modal" id="desc_flagelador">
                        
                        </div>
                    </dialog>
                    <br>
                    <button>Escolher Este</button> 
                </div>
                <div class="card">
                    <h3>Vampiro Canibal</h3>
                    <img src="" alt="">
                    <button onclick="aparecer('canibal')">Ver especificações</button>
                    <dialog id="canibal">
                        <div class="modal" id="desc_canibal">
                        
                        </div>
                    </dialog>
                    <br>
                    <button>Escolher Este</button> 
                </div>
            </div>    
            `

            classes = {
                cacador: document.getElementById('cacador'),
                barabaro: document.getElementById('barbaro'),
                ilusionista: document.getElementById('ilusionista'),
                senhor: document.getElementById('senhor'),
                cultista: document.getElementById('cultista'),
                iluminado: document.getElementById('iluminado'),
                flagelador: document.getElementById('flagelador'),
                canibal: document.getElementById('canibal')
            };
        }


        function aparecer(item) {
            classes[item].showModal();

            if (classes['cacador']) {
                desc_cacador.innerHTML = `
                <h3>Caçador Sombrio</h3>
        <p>
            Diferente de outros vampiros que matam por necessidade ou prazer imediato, o Caçador Sombrio se deleita no
            jogo da caça. Ele rastreia suas presas por dias, até semanas, estudando cada movimento antes de atacar. Seus
            sentidos, já sobre-humanos, foram aguçados ao ponto de perceber o menor sussurro no vento ou o mais tênue
            cheiro de medo.
        </p>
        <ul>
            <li>
                Agilidade aumentada: Aumenta a chance de esquiva e ataques furtivos.[+3 pontos de agilidade]
            </li>
            <li>
                Habilidade de perseguição: Pode rastrear presas com facilidade, seus sentidos foram treinados ao
                máximo.[vantagem nas trilhas sensoriais, qualquer teste sensorial tem vantagem.]
            </li>
            <li>
                Resistência a ataques furtivos: Difícil de ser pego de surpresa por outros vampiros ou caçadores. [+2
                pontos de Sangue Ancestral]
            </li>
        </ul>
        <h4>Desvantagens:</h4>
        <p>
            Obcecado pela Caça: O Caçador Sombrio não consegue resistir ao impulso de caçar. Sempre que está diante de
            uma presa em potencial, precisa realizar um teste de Inteligência para evitar persegui-la, independentemente
            da situação. Falhar no teste pode colocá-lo e seus aliados em risco.
        </p>
        <p>
            Isolamento Natural: A natureza predatória do Caçador Sombrio o torna antissocial. Ele tem dificuldade em
            formar laços ou cooperar com outros. [-2 de carisma]
        </p>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+3 de agilidade</div>
            <div class="caixa">+2 sangue ancestral</div>
            <div class="caixa">vantagem na trilha sensorial</div>
            <div class="caixa">-2 carisma</div>
        </div>
        <br>
        <button onclick="fechar('cacador')">Fechar</button>
                `
            }

            if (classes['senhor']) {
                desc_senhor.innerHTML = `<h3>Senhor das Sombras</h3>
        <p>
            Na escuridão mais profunda, onde até mesmo outros vampiros hesitam em pisar, reside o Senhor das Sombras.
            Ele não apenas abraçou a noite — tornou-se parte dela. Seu domínio sobre as trevas vai além da simples
            ausência de luz; as sombras sussurram segredos proibidos, escondem-no de olhos indesejados e dobram-se à sua
            vontade.
        </p>
        <ul>
            <li>
                Controle mental aprimorado: Facilita a manipulação de criaturas fracas ou até humanos, forçando-os a
                fazer sua vontade.[vantagem na trilha da habilidade mental]
            </li>
            <li>
                as sombras o protegem e o ajudam a se defender contra os mal intencionados que tentam descobrir os seus
                segredos por meio de invasões[+2 pontos de inteligência e sangue ancestral]
            </li>
            <li>
                Transformação em névoa ou sombra: o senhor das sombras tem uma facilidade maior com todo o obscuro, ele
                ouve as sombras sussurrando em seu ouvido[vantagem na trilha das transformações de névoa e sombra]
            </li>
        </ul>
        <h4>Desvantagens:</h4>
        <p>
            Eco Sombrio – As sombras o ouvem tanto quanto ele as ouve. Seu constante contato com a escuridão perturba
            sua mente, tornando difícil distinguir realidade de ilusão. Sempre que tenta usar sua habilidade de Controle
            Mental ou Transformação Sombria, deve fazer um teste de Inteligência. Se falhar, escutará sussurros
            incoerentes ou falsas visões que podem levá-lo a tomar decisões erradas, ou até mesmo traí-lo no momento
            mais crucial.
        </p>
        <h3>Resumo:</h3>
        <div class="grid">
            <div class="caixa">+2 de inteligência</div>
            <div class="caixa">+2 sangue ancestral</div>
            <div class="caixa">vantagem na trilha da habilidade mental</div>
            <div class="caixa">vantagem na trilha das transformações de névoa e sombra</div>
        </div>
        <br>
        <button onclick="fechar('senhor')">Fechar</button>
        `
            }

        }

        function fechar(item) {
            classes[item].close()
        }
        let pontosAtributosTotais = 10;
        let pontosVida = 20;
        let pontosSanidade = 20;
        let pontosDefesa = 5;
        let armadura = 0;

        let pontos = {
            carisma: 0,
            inteligencia: 0,
            agilidade: 0,
            vigor: 0,
            sangue: 0,
        };

        // Objeto para armazenar os elementos DOM que mostram os valores
        let elementos = {};

        function atributos() {
            div_conteudoClasse.style.display = "none"
            div_conteudoInicio.style.display = "none"
            div_conteudoHabilidades.style.display = "none"
            div_conteudoAtributos.style.display = ""

            div_conteudoAtributos.innerHTML = `
    <div class="navbar">
                    <ul>
                        <li><a onclick="inicio()">Inicio</a></li>
                        <li><a onclick="classe()">Classe</a></li>
                        <li><a onclick="atributos()">Atributos</a></li>
                        <li><a onclick="habilidades()">Habilidades</a></li>
                    <ul>
    </div>
    <div class="Horizontal">
        <div class="ConteudoAtributo">
            <h3>Pontos Totais</h3>
            <p id="pontos_totais"></p>
            <h3>Atributos</h3>

            <div class="atributo carisma">
                <p>Carisma</p>
                <p id="qtd_carisma"></p>
                <div class="botoes">
                    <button onclick="pontuação(1, 'carisma')">+</button>
                    <button onclick="pontuação(-1, 'carisma')">-</button>
                </div>
            </div>

            <div class="atributo inteligencia">
                <p>Inteligência</p>
                <p id="qtd_inteligencia"></p>
                <div class="botoes">
                    <button onclick="pontuação(1, 'inteligencia')">+</button>
                    <button onclick="pontuação(-1, 'inteligencia')">-</button>
                </div>
            </div>

            <div class="atributo agilidade">
                <p>Agilidade</p>
                <p id="qtd_agilidade"></p>
                <div class="botoes">
                    <button onclick="pontuação(1, 'agilidade')">+</button>
                    <button onclick="pontuação(-1, 'agilidade')">-</button>
                </div>
            </div>

            <div class="atributo vigor">
                <p>Vigor</p>
                <p id="qtd_vigor"></p>
                <div class="botoes">
                    <button onclick="pontuação(1, 'vigor')">+</button>
                    <button onclick="pontuação(-1, 'vigor')">-</button>
                </div>
            </div>

            <div class="atributo sangueAncestral">
                <p>Sangue Ancestral</p>
                <p id="qtd_sangue_ancestral"></p>
                <div class="botoes">
                    <button onclick="pontuação(1, 'sangue')">+</button>
                    <button onclick="pontuação(-1, 'sangue')">-</button>
                </div>
            </div>
        </div>
        <div class="ConteudoAtributo">
            <h3>Pontos de vida</h3>
            <p id="qtd_vida"></p>

            <h3>Pontos de Sanidade</h3>
            <p id="qtd_sanidade"></p>

            <h3>Pontos de Defesa</h3>
            <p id="qtd_defesa"></p>
        </div>
    </div>`;

            // Agora atribuimos os elementos aos campos
            elementos = {
                carisma: document.getElementById('qtd_carisma'),
                inteligencia: document.getElementById('qtd_inteligencia'),
                agilidade: document.getElementById('qtd_agilidade'),
                vigor: document.getElementById('qtd_vigor'),
                sangue: document.getElementById('qtd_sangue_ancestral'),
                totais: document.getElementById('pontos_totais'),
                vida: document.getElementById('qtd_vida'),
                sanidade: document.getElementById('qtd_sanidade'),
                defesa: document.getElementById('qtd_defesa')
            };

            // Atualiza os valores iniciais na tela
            atualizarExibicao();
        }

        function atualizarExibicao() {
            elementos.carisma.innerHTML = pontos.carisma;
            elementos.inteligencia.innerHTML = pontos.inteligencia;
            elementos.agilidade.innerHTML = pontos.agilidade;
            elementos.vigor.innerHTML = pontos.vigor;
            elementos.sangue.innerHTML = pontos.sangue;
            elementos.totais.innerHTML = pontosAtributosTotais;
            elementos.vida.innerHTML = pontosVida;
            elementos.sanidade.innerHTML = pontosSanidade;
            elementos.defesa.innerHTML = pontosDefesa;
        }

        function pontuação(numero, atributo) {

            if (numero === 1 && pontos[atributo] >= 5) {
                alert("Quantidade máxima alcançada");
                return;
            }
            if (numero === -1 && pontos[atributo] <= 0) {
                alert("Quantidade mínima alcançada");
                return;
            }
            if (numero === 1 && pontosAtributosTotais <= 0) {
                alert("Quantidade de pontos total acabou");
                return;
            }

            pontosAtributosTotais -= numero;
            pontos[atributo] += numero;
            pontosVida = 20 * pontos.vigor;
            pontosSanidade = 20 + (10 * pontos.inteligencia)
            pontosDefesa = 5 + pontos.agilidade;
            console.log(pontosVida);
            if (pontosVida == 0) {
                pontosVida = 20;
            }
            atualizarExibicao();

            // Animação
            let elementoAlterado = elementos[atributo];

            elementoAlterado.classList.add("troca");
            setTimeout(() => elementoAlterado.classList.remove("troca"), 300);
            elementos.totais.classList.add("troca");
            setTimeout(() => elementos.totais.classList.remove("troca"), 300);
        }

        function habilidades() {
            div_conteudoHabilidades.style.display = ""
            div_conteudoAtributos.style.display = "none"
            div_conteudoClasse.style.display = "none"
            div_conteudoInicio.style.display = "none"


            div_conteudoHabilidades.innerHTML =
            `
            <div class="navbar">
                    <ul>
                        <li><a onclick="inicio()">Inicio</a></li>
                        <li><a onclick="classe()">Classe</a></li>
                        <li><a onclick="atributos()">Atributos</a></li>
                        <li><a onclick="habilidades()">Habilidades</a></li>
                    <ul>
            </div>
                <h1>Habilidades Gerais</h1>
                <p>escolha as habilidades que seu personagem ira ter</p>
                <div class="habilidades">
                    <p id="pontos_Habilidade"></p>
                    <div class="garras">
                        <div class="habilidadeGeral">
                            <div class="ramificacao lado1">
                                <button onclick="habilidades(-2)">Corte rápido</button>
                                <button onclick="habilidades(-3)">Frenesi de garras</button>
                                <button onclick="habilidades(-4)">Rasgo da destruição</button>
                            </div>

                            <div class="ramificacao lado2">
                                <button onclick="habilidades(-2)">Garras envenedadas</button>
                                <button onclick="habilidades(-3)">Destruidor de armaduras</button>
                                <button onclick="habilidades(-4)">Rasgo Sombrio</button>
                            </div>
                        </div>
                        <div>
                            <div class="botoes">
                                <button onclick="habilidades(-1)">Garras Sobrenaturais</button>
                                <button onclick="abrirGarras()">Garras</button>
                                <dialog id="garras">
                                    <div id="container_garras"></div>
                                </dialog>
                            </div>
                        </div>
                    </div>

                    <div class="Voo">
                        <div class="habilidadeGeral">
                            <div class="ramificacao lado1">
                                <button onclick="habilidades(-3)">Mergulho aéreo</button>
                                <button onclick="habilidades(-4)">Teleporte sombrio</button>
                            </div>
                            <div class="ramificacao lado2">
                                <button onclick="habilidades(-3)">Investida aérea</button>
                                <button onclick="habilidades(-4)">Voô profano</button>
                            </div>
                        </div>
                        <div class="botoes">
                            <button onclick="habilidades(-2)">Flutuar</button>
                            <button onclick="habilidades(-1)">Super Salto</button>
                            <button>Voô</button>
                        </div>
                    </div>
                </div>


                <h1>Transformações</h1>
                <div class="transformacoes">
                    <div class="transformacao">
                        <div class="item inicial">
                            <button>Lobo</button>
                        </div>
                        <div class="item vertical">
                            <button>Sentidos aprimorados</button>
                            <button>Velocidade lupina</button>
                        </div>
                        <div class="item horizontal">
                            <button>Furia lupina</button>
                            <button>Caninos sombrios</button>
                        </div>
                    </div>

                    <div class="transformacao">
                        <div class="item inicial">
                            <button>Gato</button>
                        </div>
                        <div class="item vertical">
                            <button>Agilidade Felina</button>
                            <button>Furtividade animal</button>
                        </div>
                        <div class="item horizontal">
                            <button>Olhos do Predador</button>
                            <button>Garras Venenosas</button>
                        </div>
                    </div>
                </div>
            `
        }
    </script>